<script src="{{ url_for('static', filename='js/header.js') }}" defer></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/header.css') }}">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">


<header>
  <div class="headerContainer">
    <a href="/">
      <img src="{{ url_for('static', filename='images/logoMini_white1.png') }}" alt="HALシネマロゴ" id="rogo" data-tippy-content="トップに戻る">
    </a>
    <div class="Nav">
      <a href="/movie_list" class="NavButton">
        <div class="Text">上映中</div>
        <div class="SubText">Now playing</div>
      </a>
      <a href="/movie_list?set=comingsoon" class="NavButton">
        <div class="Text">公開予定</div>
        <div class="SubText">Coming Soon</div>
      </a>
      <a href="/guide" class="NavButton Media">
        <div class="Text">劇場を探す</div>
        <div class="SubText">Theater LIst</div>
      </a>

    </div>
    <div id="bento-menu-icon" class="bento-menu-icon-wrapper" data-tippy-content="メニュー">
        <div class="bento-menu-icon">
          <div></div><div></div><div></div><div></div>
          <div></div><div></div><div></div><div></div><div></div>     
        </div>
    </div>
    <div id="hamburger-icon" class="hamburger-icon" data-tippy-content="メニュー">☰</div>

    <!-- ユーザーメニューのコンテナ -->
    <div class="user-menu-container">
      <!-- アイコン部分（クリックのトリガー） -->
      <div class="userIcon Media" id="user-icon-wrapper" data-tippy-content="プロフィール">
        {% if user_data %}
        <img src="{{ url_for('static', filename='images/usericon/80x80/' + user_data.accountIcon) }}" onerror="this.onerror=null; this.src='{{ url_for('static', filename='images/usericon/80x80/default.jpg') }}';" alt="ユーザーアイコン" id="user-icon"/>
        {% else %}
        <img src="{{ url_for('static', filename='images/usericon/80x80/default.jpg') }}" onerror="this.onerror=null; this.src='{{ url_for('static', filename='images/usericon/80x80/default.jpg') }}';" alt="ユーザーアイコン" id="user-icon"/>
        {% endif %}
      </div>

      <!-- ドロップダウンメニュー（最初は非表示） -->
      <div id="user-dropdown-menu" class="user-dropdown-menu">
        <div class="user-info">
          <div class="user-name">{{user_data.accountName}}</div>
          <div class="user-email">{{user_data.emailAddress}}</div>
        </div>
        <a href="/profile" class="dropdown-item">プロフィール</a>
        <a href="/logout" class="dropdown-item">ログアウト</a>
      </div>
    </div>

  </div>
</header>


<!-- メニューの外側をクリックしたことを検知するためのオーバーレイ -->
<div id="menu-overlay" class="menu-overlay"></div>

<!-- ナビゲーションメニュー本体 -->
<div id="nav-menu" class="nav-menu">
    <!-- 閉じるボタン -->
    <div id="close-button" class="close-button">×</div>
    
    <!-- メニュー項目 -->
    <div class="menu-list">
        <div class="menu-item"><a href="/movie_list">公開中</a></div>
        <div class="menu-item"><a href="/movie_list?set=comingsoon">公開予定</a></div>
        <div class="menu-item"><a href="/guide">劇場を探す</a></div>
        <div class="menu-item"><a href="/profile">マイアカウント</a></div>
        <div class="menu-item"><a href="/logout">ログアウト</a></div>
        <div class="menu-item"><a href="/login">サインイン</a></div>
    </div>
</div>

<script>const userData = {{ user_data | tojson }};</script>
 